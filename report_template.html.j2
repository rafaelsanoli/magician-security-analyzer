<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Relatório de Análise IA - Magician Analyzer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans text-gray-900 p-6">
  <div class="max-w-5xl mx-auto">
    <h1 class="text-3xl font-bold mb-4">🔍 Relatório de Análise com IA</h1>
    <p class="mb-6 text-gray-600">Resultado gerado automaticamente por inteligência artificial.</p>

    {% if analysis_ia %}
      {% for item in analysis_ia %}
        <div class="bg-white shadow-md rounded-xl p-6 mb-4 border-l-4
          {% if item.severidade == 'crítica' %}border-red-600
          {% elif item.severidade == 'alta' %}border-orange-500
          {% elif item.severidade == 'média' %}border-yellow-400
          {% else %}border-green-500{% endif %}">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">⚠️ {{ item.tipo_de_falha }}</h2>
          <p class="text-sm text-gray-700 mb-2"><strong>Severidade:</strong> <span class="uppercase font-bold">{{ item.severidade }}</span></p>
          <p class="text-sm text-gray-700 mb-2"><strong>Trecho Vulnerável:</strong></p>
          <pre class="bg-gray-100 p-3 rounded-md text-sm overflow-auto">{{ item.trecho }}</pre>
          <p class="mt-2 text-sm text-gray-700"><strong>Recomendação:</strong> {{ item.recomendacao }}</p>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-gray-500">Nenhuma vulnerabilidade detectada.</p>
    {% endif %}
  </div>
</body>
</html>
